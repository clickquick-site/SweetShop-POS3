<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>POS DZ โ ูุธุงู ููุทุฉ ุงูุจูุน</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;900&family=IBM+Plex+Mono:wght@400;600&family=Tajawal:wght@300;400;500;700&family=Poppins:wght@300;400;600;700&family=Amiri:wght@400;700&family=Readex+Pro:wght@300;400;600;700&family=Noto+Kufi+Arabic:wght@400;700&family=Raleway:wght@300;400;600;700&family=Montserrat:wght@300;400;600;700&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style.css">
</head>
<body>

<!-- โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
     ุดุงุดุฉ ุชุณุฌูู ุงูุฏุฎูู
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ -->
<div id="loginScreen" class="loginBox">

  <!-- ุฎูููุฉ ูุชุญุฑูุฉ -->
  <div class="login-bg-particles">
    <span></span><span></span><span></span>
    <span></span><span></span><span></span>
  </div>

  <!-- ุดุนุงุฑ ูุนููุงู -->
  <div class="login-brand">
    <div class="login-logo-ring">
      <svg viewBox="0 0 60 60" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="30" cy="30" r="28" stroke="url(#lg1)" stroke-width="2.5"/>
        <path d="M18 30h8l4-10 6 20 4-10h8" stroke="url(#lg2)" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
        <defs>
          <linearGradient id="lg1" x1="2" y1="2" x2="58" y2="58"><stop stop-color="#6366f1"/><stop offset="1" stop-color="#a855f7"/></linearGradient>
          <linearGradient id="lg2" x1="18" y1="20" x2="42" y2="50"><stop stop-color="#38bdf8"/><stop offset="1" stop-color="#6366f1"/></linearGradient>
        </defs>
      </svg>
    </div>
    <h1 class="login-title">POS <span>DZ</span></h1>
    <p class="login-sub">ูุธุงู ููุทุฉ ุงูุจูุน ุงูุฐูู โ ููุงุฒู ุงูุญูููุงุช ูุงูุชุบููู</p>
  </div>

  <!-- ุจุทุงูุฉ ุงูุฏุฎูู -->
  <div class="login-card">
    <div class="login-card-header">
      <div class="login-card-icon">๐</div>
      <h3 data-i18n="login_title">ุชุณุฌูู ุงูุฏุฎูู</h3>
    </div>

    <!-- ุงุฎุชูุงุฑ ุงููุณุชุฎุฏู โ ูุถููู ุฏุงุฆูุงู -->
    <div class="input-group" id="userSelectGroup">
      <span class="input-icon">๐ค</span>
      <select id="userSelect" required></select>
      <span class="input-chevron">โพ</span>
    </div>

    <!-- ุญูู PIN โ ูุถููู ุฏุงุฆูุงู -->
    <div class="input-group" id="pinGroup">
      <span class="input-icon">๐</span>
      <input id="pin" type="password" placeholder="ุฑูุฒ PIN (4 ุฃุฑูุงู)"
             data-i18n-placeholder="pin_placeholder" maxlength="4"
             autocomplete="off" inputmode="numeric">
      <button type="button" class="pin-toggle" onclick="togglePinVisibility()" title="ุฅุธูุงุฑ/ุฅุฎูุงุก">
        <svg id="eyeIcon" xmlns="http://www.w3.org/2000/svg" width="18" height="18"
             viewBox="0 0 24 24" fill="none" stroke="currentColor"
             stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
          <circle cx="12" cy="12" r="3"></circle>
        </svg>
      </button>
    </div>

    <!-- ุฒุฑ ุงูุฏุฎูู -->
    <button class="btn-login" onclick="login()" data-i18n="login_btn">
      <span class="btn-login-icon">โ</span>
      <span>ุฏุฎูู</span>
    </button>

    <!-- ุฑุณุงุฆู ุงูุฎุทุฃ/ุงููุฌุงุญ -->
    <div id="loginMsg" class="login-msg" role="alert"></div>

    <!-- ุฒุฑ ุทูุงุฑุฆ -->
    <button id="emergencyResetBtn" onclick="emergencyReset()"
      style="display:none;margin-top:16px;background:transparent;border:1px dashed #ef4444;
             color:#ef4444;font-size:12px;padding:8px 14px;border-radius:10px;
             cursor:pointer;width:100%;transition:all 0.2s">
      ๐จ ุฅุนุงุฏุฉ ุถุจุท ุทุงุฑุฆุฉ (ูู ุญุงู ูุดููุฉ ุงูุฏุฎูู)
    </button>
  </div>

  <!-- ุดุฑูุท ุฅุตุฏุงุฑ -->
  <div class="login-version-bar">
    <span>v2.0.0</span>
    <span class="login-version-dot"></span>
    <span>POS DZ ยฉ 2026</span>
    <span class="login-version-dot"></span>
    <span>ุจูุณ ุฏูุฒุงุฏ</span>
  </div>

</div>

<!-- โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
     ุงูุชุทุจูู ุงูุฑุฆูุณู
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ -->
<div id="mainApp" style="display:none;">

  <!-- โโโ ุงูููุฏุฑ โโโ -->
  <header>
    <div class="header-right">
      <div class="header-brand">
        <img id="headerLogo" src="" alt="" style="height:38px;border-radius:8px;display:none">
        <div class="header-info">
          <h2 id="shopName">POS DZ</h2>
          <div class="header-time-row">
            <span class="time-badge" id="currentDate"></span>
            <span class="time-badge accent" id="currentTime"></span>
          </div>
        </div>
      </div>
    </div>

    <!-- ูุณุท ุงูููุฏุฑ: ูุคุดุฑุงุช ุณุฑูุนุฉ -->
    <div class="header-center" id="headerKPI">
      <div class="hkpi" id="hkpiSales" title="ูุจูุนุงุช ุงูููู">
        <span class="hkpi-icon">๐</span>
        <span class="hkpi-val" id="hkpiSalesVal">0</span>
      </div>
      <div class="hkpi-sep"></div>
      <div class="hkpi" id="hkpiRevenue" title="ุฅูุฑุงุฏุงุช ุงูููู">
        <span class="hkpi-icon">๐ฐ</span>
        <span class="hkpi-val" id="hkpiRevenueVal">0 ุฏุฌ</span>
      </div>
    </div>

    <div class="header-left">
      <div class="header-posdz-logo">POS <span>DZ</span></div>
      <!-- ุฒุฑ ุงููุณุชุฎุฏู ุงูุญุงูู -->
      <div class="header-user-badge" id="headerUserBadge" title="ุงููุณุชุฎุฏู ุงูุญุงูู">
        <span class="huser-avatar" id="huserAvatar">๐ค</span>
        <span class="huser-name" id="huserName">โ</span>
      </div>
      <button id="menuBtn" class="menu-trigger" aria-label="ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ">
        <span></span><span></span><span></span>
      </button>
      <nav id="sideMenu" class="hidden">
        <div class="menu-header-label">
          <span>ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ</span>
          <button class="menu-close-btn" onclick="document.getElementById('sideMenu').classList.add('hidden')">โ</button>
        </div>
        <ul>
          <li onclick="show('sale')"      data-i18n="menu_sale">
            <span class="menu-icon">๐</span><span class="menu-text">ูุงุฌูุฉ ุงูุจูุน</span>
            <span class="menu-arrow">โบ</span>
          </li>
          <li onclick="show('stock')"     data-i18n="menu_stock" data-role="manager">
            <span class="menu-icon">๐ฆ</span><span class="menu-text">ุงููุฎุฒูู</span>
            <span class="menu-arrow">โบ</span>
          </li>
          <li onclick="show('suppliers')" data-role="manager">
            <span class="menu-icon">๐</span><span class="menu-text">ุงูููุฑุฏูู</span>
            <span class="menu-arrow">โบ</span>
          </li>
          <li onclick="show('customers')" data-i18n="menu_customers">
            <span class="menu-icon">๐ฅ</span><span class="menu-text">ุงูุฒุจุงุฆู</span>
            <span class="menu-arrow">โบ</span>
          </li>
          <li onclick="show('alerts')"    data-i18n="menu_users" data-role="manager">
            <span class="menu-icon">๐ค</span><span class="menu-text">ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู</span>
            <span class="menu-arrow">โบ</span>
          </li>
          <li onclick="show('reports')"   data-i18n="menu_reports" data-role="manager">
            <span class="menu-icon">๐</span><span class="menu-text">ุฅุฏุงุฑุฉ ุงูุฃุนูุงู</span>
            <span class="menu-arrow">โบ</span>
          </li>
          <li onclick="show('settings')"  data-i18n="menu_settings" data-role="manager">
            <span class="menu-icon">โ๏ธ</span><span class="menu-text">ุงูุฅุนุฏุงุฏุงุช</span>
            <span class="menu-arrow">โบ</span>
          </li>
          <li class="menu-logout" onclick="logout()" data-i18n="logout">
            <span class="menu-icon">๐ช</span><span class="menu-text">ุฎุฑูุฌ</span>
          </li>
        </ul>
        <div class="menu-footer">
          <span>POS DZ v2.0.0</span>
        </div>
      </nav>
    </div>
  </header>

  <!-- โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
       ูุงุฌูุฉ ุงูุจูุน
  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ -->
  <section id="sale" class="page active">

    <div class="page-header">
      <h3 data-i18n="sale_title">
        <span class="page-header-icon">๐</span> ูุงุฌูุฉ ุงูุจูุน
      </h3>
      <div class="page-header-actions">
        <span class="sale-date-chip" id="saleDateChip"></span>
      </div>
    </div>

    <!-- ุดุฑูุท ุงูุจุญุซ ูุงูุฅุถุงูุฉ -->
    <div class="sale-search-wrap">
      <div class="search-box" id="saleSearchBox">
        <span class="search-icon">๐</span>
        <input id="search"
               placeholder="ุงุณู ุงูููุชุฌ ุฃู ุงูุจุงุฑููุฏ..."
               data-i18n-placeholder="search_placeholder"
               autocomplete="off"
               oninput="searchSuggestions()">
        <div class="search-qty-wrap">
          <label class="search-qty-label">ูููุฉ</label>
          <input id="searchQty" type="number" min="1" value="1"
                 title="ุงููููุฉ"
                 class="search-qty-input">
        </div>
        <button type="button"
                onclick="startBarcodeScanner('sale')"
                class="btn-scan"
                title="ูุณุญ ุงูุจุงุฑููุฏ ุฃู QR Code">
          ๐ท <span>ูุณุญ</span>
        </button>
        <button onclick="addItem()" class="btn-add" data-i18n="add_btn">โ ุฅุถุงูุฉ</button>
      </div>
      <div id="searchSuggestions" class="search-suggestions hidden"></div>
    </div>

    <!-- ุฌุฏูู ุงูุณูุฉ -->
    <div class="cart-container">
      <table>
        <thead>
          <tr>
            <th data-i18n="col_item">๐ท๏ธ ุณูุนุฉ</th>
            <th data-i18n="col_qty">ูููุฉ</th>
            <th data-i18n="col_price">ุณุนุฑ ุงููุญุฏุฉ</th>
            <th data-i18n="col_total">ุงููุฌููุน</th>
            <th data-i18n="col_options">โ๏ธ</th>
          </tr>
        </thead>
        <tbody id="cart"></tbody>
      </table>
      <!-- ุญุงูุฉ ุงูุณูุฉ ุงููุงุฑุบุฉ -->
      <div class="cart-empty-state" id="cartEmptyState">
        <div class="cart-empty-icon">๐</div>
        <div class="cart-empty-text">ุงูุณูุฉ ูุงุฑุบุฉ</div>
        <div class="cart-empty-sub">ุงุจุญุซ ุนู ููุชุฌ ูุฅุถุงูุชู</div>
      </div>
    </div>

    <!-- ุฒุฑ ุชูุฑูุบ ุงูุณูุฉ -->
    <div class="cart-clear-row">
      <button id="clearCartBtn" onclick="clearCart()"
              style="display:none"
              class="btn-clear-cart">
        ๐๏ธ ุชูุฑูุบ ุงูุณูุฉ
      </button>
    </div>

    <!-- ุดุฑูุท ุงูุฅุฌูุงูู -->
    <div class="total-bar">
      <div class="total-bar-left">
        <span class="total-label" data-i18n="col_total">ุงููุฌููุน ุงูููู</span>
        <span class="total-items-count" id="totalItemsCount">0 ุตูู</span>
      </div>
      <span id="total" class="total-val">0</span>
    </div>

    <!-- ุดุฑูุท ุงูุฎุตู -->
    <div class="discount-bar" id="discountBar">
      <span class="discount-label">๐ท๏ธ ุฎุตู:</span>
      <div class="discount-controls">
        <input id="discountVal" type="number" min="0" value="0"
               placeholder="0" class="discount-input"
               oninput="updateTotal()">
        <select id="discountType" class="discount-type" onchange="updateTotal()">
          <option value="fixed">ุฏุฌ ุซุงุจุช</option>
          <option value="percent">% ูุณุจุฉ</option>
        </select>
      </div>
      <span id="afterDiscount" class="after-discount-val"></span>
    </div>

    <!-- ููุทูุฉ ุงูุฏูุน -->
    <div class="payment-grid">
      <div class="input-group">
        <span class="input-icon">๐ต</span>
        <input id="paid" placeholder="ุงููุจูุบ ุงููุฏููุน"
               data-i18n-placeholder="paid_placeholder"
               type="number" style="flex:1">
      </div>
      <div class="input-group">
        <span class="input-icon">๐ค</span>
        <select id="custSelect" style="flex:1"></select>
      </div>
    </div>

    <!-- ุฃุฒุฑุงุฑ ุงูุฏูุน -->
    <div class="pay-actions">
      <button onclick="pay()"     class="pay-btn green"  data-i18n="pay_btn">
        <span class="pay-btn-icon">โ</span> ุชุณุฏูุฏ
      </button>
      <button onclick="partial()" class="pay-btn orange" data-i18n="partial_btn">
        <span class="pay-btn-icon">๐ฐ</span> ุฌุฒุฆู
      </button>
      <button onclick="toDebt()"  class="pay-btn red"    id="debtBtn" data-i18n="debt_btn">
        <span class="pay-btn-icon">๐</span> ุฏูู
      </button>
    </div>
  </section>

  <!-- โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
       ุงููุฎุฒูู
  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ -->
  <section id="stock" class="page">
    <div class="page-header">
      <button class="backBtn" onclick="goBack()">
        <span class="back-arrow">โฌ</span>
        <span data-i18n="back">ุงูุฑุฌูุน</span>
      </button>
      <h3><span class="page-header-icon">๐ฆ</span> ุงููุฎุฒูู</h3>
    </div>

    <!-- ุดุฑูุท ุชูุจููุงุช ุงููุฎุฒูู -->
    <div id="stockAlertBanner" class="stock-alert-banner" style="display:none"></div>

    <!-- ุดุฑูุท ุงูุชููู -->
    <div class="stock-nav-bar">
      <button class="snav-btn active" id="snavAll" onclick="switchStockView('all',this)">
        <span class="snav-icon">๐</span>
        <span class="snav-text">ูู ุงูููุชุฌุงุช</span>
      </button>
      <button class="snav-btn" id="snavAdd" onclick="switchStockView('add',this)">
        <span class="snav-icon">โ</span>
        <span class="snav-text">ุฅุถุงูุฉ ููุชุฌ</span>
      </button>
      <button class="snav-btn" id="snavFamilies" onclick="switchStockView('families',this)">
        <span class="snav-icon">๐</span>
        <span class="snav-text">ุงูุนุงุฆูุงุช</span>
      </button>
      <button class="snav-btn" id="snavImport" onclick="switchStockView('import',this)">
        <span class="snav-icon">๐</span>
        <span class="snav-text">ุงุณุชูุฑุงุฏ / ุชุตุฏูุฑ</span>
      </button>
    </div>

    <!-- ุงููุณู 1: ูู ุงูููุชุฌุงุช -->
    <div id="stockViewAll" class="stock-view active">
      <div class="sv-toolbar">
        <div class="search-box small" style="flex:1;margin:0">
          <span class="search-icon">๐</span>
          <input id="stockSearch"
                 placeholder="ุจุญุซ ุจุงูุงุณู ุฃู ุงูุจุงุฑููุฏ ุฃู ุงูุนุงุฆูุฉ..."
                 oninput="renderStock()"
                 autocomplete="off">
        </div>
        <div id="sv-stats" class="sv-stats"></div>
      </div>
      <ul id="stockList"></ul>
    </div>

    <!-- ุงููุณู 2: ุฅุถุงูุฉ ููุชุฌ -->
    <div id="stockViewAdd" class="stock-view">
      <div class="sadd-card">

        <!-- ููุทูุฉ ุงูุจุงุฑููุฏ -->
        <div class="sadd-barcode-zone">
          <div class="sadd-barcode-icon">๐</div>
          <div class="sadd-barcode-info">
            <div class="sadd-barcode-title">
              ุงูุจุงุฑููุฏ <span class="sadd-required">ููู</span>
            </div>
            <div class="sadd-barcode-hint">
              ุงูุณุญ ุงูุจุงุฑููุฏ ุจุฌูุงุฒ ุงูุณูุงูุฑ ุฃู ุฃุฏุฎูู ูุฏููุงู โ ูุฌุจ ุฃู ูุชุทุงุจู ูุน ุงูููุชุฌ ุชูุงูุงู
            </div>
          </div>
          <div class="sadd-barcode-field-wrap" style="display:flex;gap:8px">
            <input id="barcode"
                   placeholder="ุงูุณุญ ุฃู ุฃุฏุฎู ุงูุจุงุฑููุฏ..."
                   class="sadd-barcode-field"
                   autocomplete="off"
                   spellcheck="false"
                   style="flex:1">
            <button type="button" id="scanBarcodeBtn"
                    onclick="startBarcodeScanner('product')"
                    class="btn-scan-product"
                    title="ูุชุญ ุงููุงููุฑุง ููุณุญ ุงูุจุงุฑููุฏ ุฃู QR Code">
              ๐ท ูุณุญ
            </button>
          </div>
        </div>

        <!-- ุญููู ุงูููุชุฌ -->
        <div class="sadd-fields">
          <div class="sadd-section-title">๐ ุจูุงูุงุช ุงูููุชุฌ โ ุชูุฏุฎู ูุฏููุงู</div>
          <div class="form-grid">
            <div>
              <label class="set-label">ุงูุนุงุฆูุฉ <span style="color:var(--danger)">*</span></label>
              <select id="type" onchange="updateBrandSelectByFamily()">
                <option value="">โ ุงุฎุชุฑ ุงูุนุงุฆูุฉ โ</option>
              </select>
            </div>
            <div>
              <label class="set-label">ุงููุงุฑูุฉ <span style="color:var(--danger)">*</span></label>
              <input id="brand" placeholder="ุฃุฏุฎู ุงุณู ุงููุงุฑูุฉ..." type="text" required>
            </div>
            <div>
              <label class="set-label">ุงูุญุฌู / ุงูููุงุณ / ุงูุณุนุฉ</label>
              <input id="size" placeholder="ูุซุงู: 1Lุ XLุ 500g">
            </div>
            <div>
              <label class="set-label">ุงููุญุฏุฉ</label>
              <select id="unit">
                <option value="ูุทุนุฉ">ูุทุนุฉ</option>
                <option value="ูููู">ูููู</option>
                <option value="ุบุฑุงู">ุบุฑุงู</option>
                <option value="ูุชุฑ">ูุชุฑ</option>
                <option value="ุฑูู">ุฑูู</option>
                <option value="ุนูุจุฉ">ุนูุจุฉ</option>
                <option value="ูุฑุชูู">ูุฑุชูู</option>
                <option value="ูุชุฑ">ูุชุฑ</option>
                <option value="ุนุจูุฉ">ุนุจูุฉ</option>
              </select>
            </div>
            <div>
              <label class="set-label">ุณุนุฑ ุงูุจูุน <span style="color:var(--danger)">*</span></label>
              <input id="price" placeholder="0.00" type="number" min="0" step="0.01">
            </div>
            <div>
              <label class="set-label">ุณุนุฑ ุงูุดุฑุงุก</label>
              <input id="costPrice" placeholder="0.00" type="number" min="0" step="0.01">
            </div>
            <div>
              <label class="set-label">ุงููููุฉ <span style="color:var(--danger)">*</span></label>
              <input id="qty" placeholder="0" type="number" min="0">
            </div>
            <div>
              <label class="set-label">ุชุงุฑูุฎ ุงูุตูุงุญูุฉ</label>
              <input id="exp" type="date">
            </div>
          </div>
          <div class="sadd-actions">
            <button onclick="clearStockAddForm()" class="btn-sadd-clear">โบ ุชูุฑูุบ ุงูุญููู</button>
            <button onclick="saveItem()"           class="btn-sadd-save">๐พ ุญูุธ ุงูููุชุฌ</button>
          </div>
        </div>

      </div>
    </div>

    <!-- ุงููุณู 3: ุงูุนุงุฆูุงุช -->
    <div id="stockViewFamilies" class="stock-view">
      <div class="fam-card">
        <div class="fam-card-head">
          <span>๐ ุงูุนุงุฆูุงุช โ ูุฆุงุช ุงูููุชุฌุงุช</span>
          <span class="fam-badge" id="famCounter">0</span>
        </div>
        <div class="fam-add-row">
          <input id="familyInput" placeholder="ุงุณู ุงูุนุงุฆูุฉ ุงูุฌุฏูุฏุฉ...">
          <button onclick="addFamily()" class="btn-fam-add">โ ุฅุถุงูุฉ</button>
        </div>
        <div class="search-box small" style="margin-bottom:10px">
          <span class="search-icon">๐</span>
          <input id="stockDynSearch"
                 placeholder="ุจุญุซ ูู ุงูุนุงุฆูุงุช..."
                 oninput="stockDynFilter()"
                 autocomplete="off">
        </div>
        <ul id="familyList"></ul>
      </div>
      <!-- ุนูุงุตุฑ ูุฎููุฉ ูุทููุจุฉ ูููุธุงู -->
      <div style="display:none">
        <ul id="brandList"></ul>
        <input id="brandInput">
        <select id="brandFamilySelect"><option value="">โ</option></select>
      </div>
    </div>

    <!-- ุงููุณู 4: ุงุณุชูุฑุงุฏ / ุชุตุฏูุฑ -->
    <div id="stockViewImport" class="stock-view">
      <div class="ie2-grid">

        <!-- ุงุณุชูุฑุงุฏ -->
        <div class="ie2-card ie2-import">
          <div class="ie2-icon">๐</div>
          <div class="ie2-title">ุงุณุชูุฑุงุฏ ุงูููุชุฌุงุช</div>
          <div class="ie2-desc">
            ุนูุฏ ูุฌูุฏ ููุชุฌ ูุดุงุจูุ ุณููุทูุจ ููู ุงูุชุฃููุฏ: ูุจูู ุงูุชุญุฏูุซ ุฃู ุชุฌุงูู ุงูููุชุฌ.<br>
            ุจุนุฏ ุงูุงุณุชูุฑุงุฏ ุชูุชูู ุชููุงุฆูุงู ููุณู "ูู ุงูููุชุฌุงุช".
          </div>
          <button onclick="document.getElementById('csvImportInput').click()"
                  class="btn-ie2 btn-ie2-import">
            ๐ ุงุฎุชูุงุฑ ููู ููุงุณุชูุฑุงุฏ
          </button>
          <input type="file" id="csvImportInput"
                 accept=".csv,.xlsx,.xls"
                 style="display:none"
                 onchange="importProductsSmartNew(this)">
          <div class="ie2-format">
            <div class="ie2-format-label">๐ ุชูุณูู ุงูููู:</div>
            <code>ุนุงุฆูุฉ, ูุงุฑูุฉ, ุญุฌู, ุจุงุฑููุฏ, ุณุนุฑ_ุจูุน, ุณุนุฑ_ุดุฑุงุก, ูููุฉ, ูุญุฏุฉ, ุตูุงุญูุฉ</code>
          </div>
          <button onclick="downloadCSVTemplate()" class="btn-ie2-template">
            โฌ๏ธ ุชุญููู ูููุฐุฌ CSV
          </button>
        </div>

        <!-- ุชุตุฏูุฑ -->
        <div class="ie2-card ie2-export">
          <div class="ie2-icon">๐ค</div>
          <div class="ie2-title">ุชุตุฏูุฑ ุงููุฎุฒูู</div>
          <div class="ie2-desc">
            ุชุตุฏูุฑ ุฌููุน ุงูููุชุฌุงุช ูู ุงููุฎุฒูู ุนูู ุดูู ููู CSV ุฌุงูุฒ ููุงุณุชุฎุฏุงู.
          </div>
          <div class="ie2-export-stats" id="ie2Stats">
            <span>๐ฆ <strong id="ie2Count">0</strong> ููุชุฌ ูู ุงููุฎุฒูู</span>
          </div>
          <button onclick="exportStockCSV()" class="btn-ie2 btn-ie2-export">
            ๐ค ุชุตุฏูุฑ CSV
          </button>
        </div>

      </div>
    </div>

  </section>

  <!-- โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
       ุงูููุฑุฏูู
  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ -->
  <section id="suppliers" class="page">
    <div class="page-header">
      <button class="backBtn" onclick="goBack()">
        <span class="back-arrow">โฌ</span>
        <span data-i18n="back">ุงูุฑุฌูุน</span>
      </button>
      <h3><span class="page-header-icon">๐</span> ุงูููุฑุฏูู</h3>
    </div>

    <div class="cust-tabs">
      <button class="ctab active" onclick="switchSupTab('list',this)">
        ๐ ูุงุฆูุฉ ุงูููุฑุฏูู
      </button>
      <button class="ctab" onclick="switchSupTab('orders',this)">
        ๐ฆ ุณุฌู ุงููุดุชุฑูุงุช
      </button>
    </div>

    <!-- ุชุจููุจ 1: ุงูููุฑุฏูู -->
    <div id="supTabList" class="cust-panel active">
      <div class="card-panel" style="margin-bottom:14px">
        <h4 class="card-panel-title">โ ุฅุถุงูุฉ ููุฑุฏ ุฌุฏูุฏ</h4>
        <div class="form-grid">
          <div>
            <label class="set-label">ุงุณู ุงูููุฑุฏ</label>
            <input id="supName" placeholder="ุงุณู ุงูููุฑุฏ ุฃู ุงูุดุฑูุฉ">
          </div>
          <div>
            <label class="set-label">ุฑูู ุงููุงุชู</label>
            <input id="supPhone" placeholder="0XXX XXX XXX" type="tel">
          </div>
          <div>
            <label class="set-label">ุงูููุชุฌุงุช ุงูููุฑููุฏุฉ</label>
            <input id="supProducts" placeholder="ูุซุงู: ุญูููุงุชุ ูุงููููุ ุจุณูููุช...">
          </div>
          <div>
            <label class="set-label">ููุงุญุธุงุช</label>
            <input id="supNotes" placeholder="ููุงุญุธุงุช ุฅุถุงููุฉ">
          </div>
        </div>
        <button onclick="addSupplier()" style="margin-top:8px">โ ุฅุถุงูุฉ ุงูููุฑุฏ</button>
      </div>
      <ul id="supList" style="margin-top:4px"></ul>
    </div>

    <!-- ุชุจููุจ 2: ุณุฌู ุงููุดุชุฑูุงุช -->
    <div id="supTabOrders" class="cust-panel">
      <div class="card-panel" style="margin-bottom:14px">
        <h4 class="card-panel-title">๐ฆ ุชุณุฌูู ุนูููุฉ ุดุฑุงุก</h4>
        <div class="form-grid">
          <div>
            <label class="set-label">ุงูููุฑุฏ</label>
            <select id="orderSupplier" style="width:100%">
              <option value="">โ ุงุฎุชุฑ ุงูููุฑุฏ โ</option>
            </select>
          </div>
          <div>
            <label class="set-label">ุชุงุฑูุฎ ุงูุดุฑุงุก</label>
            <input type="date" id="orderDate">
          </div>
          <div>
            <label class="set-label">ุงููุจูุบ ุงูุฅุฌูุงูู</label>
            <input id="orderTotal" type="number" min="0" placeholder="0.00">
          </div>
          <div>
            <label class="set-label">ุงููุจูุบ ุงููุฏููุน</label>
            <input id="orderPaid" type="number" min="0" placeholder="0.00">
          </div>
          <div style="grid-column:1/-1">
            <label class="set-label">ุชูุงุตูู ุงูุจุถุงุนุฉ</label>
            <input id="orderDetails"
                   placeholder="ูุซุงู: 50 ูุฑุชูู ูุฑูุจุง 250g + 20 ุฑูู ูุงูููู...">
          </div>
        </div>
        <button onclick="addOrder()" style="margin-top:8px">๐พ ุชุณุฌูู ุงูุดุฑุงุก</button>
      </div>
      <ul id="orderList" style="margin-top:4px"></ul>
    </div>
  </section>

  <!-- โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
       ุงูุฒุจุงุฆู
  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ -->
  <section id="customers" class="page">
    <div class="page-header">
      <button class="backBtn" onclick="goBack()">
        <span class="back-arrow">โฌ</span>
        <span data-i18n="back">ุงูุฑุฌูุน</span>
      </button>
      <h3 data-i18n="menu_customers">
        <span class="page-header-icon">๐ฅ</span> ุงูุฒุจุงุฆู
      </h3>
    </div>

    <!-- ุชุจููุจุงุช ูุณู ุงูุฒุจุงุฆู -->
    <div class="cust-tabs">
      <button class="ctab active" onclick="switchCustTab('list',this)">
        ๐ฅ ูุงุฆูุฉ ุงูุฒุจุงุฆู
      </button>
      <button class="ctab" onclick="switchCustTab('debts',this)">
        ๐ ุชุชุจุน ุงูุฏููู
      </button>
    </div>

    <!-- ุชุจููุจ 1: ูุงุฆูุฉ ุงูุฒุจุงุฆู -->
    <div id="custTabList" class="cust-panel active">
      <div class="card-panel" style="margin-bottom:14px">
        <h4 class="card-panel-title">โ ุฅุถุงูุฉ ุฒุจูู ุฌุฏูุฏ</h4>
        <div class="input-row">
          <input id="cname"
                 placeholder="ุงุณู ุงูุฒุจูู"
                 data-i18n-placeholder="customer_ph">
          <input id="cphone"
                 placeholder="ุฑูู ุงููุงุชู (ุงุฎุชูุงุฑู)"
                 type="tel"
                 style="max-width:200px">
          <button onclick="addCustomer()">โ ุฅุถุงูุฉ</button>
        </div>
      </div>
      <div class="search-box small" style="margin-bottom:12px">
        <span class="search-icon">๐</span>
        <input id="customerSearch"
               placeholder="ุจุญุซ ูู ุงูุฒุจุงุฆู..."
               oninput="renderCustomerList()"
               autocomplete="off">
      </div>
      <ul id="clist" style="margin-top:4px"></ul>
    </div>

    <!-- ุชุจููุจ 2: ุชุชุจุน ุงูุฏููู -->
    <div id="custTabDebts" class="cust-panel">
      <!-- ุจุทุงูุงุช ููุฎุต ุงูุฏููู -->
      <div class="cust-debt-summary">
        <div class="cds-card red">
          <span class="cds-icon">โ๏ธ</span>
          <span class="cds-label">ุฅุฌูุงูู ุงูุฏููู</span>
          <span class="cds-val" id="cTotalDebt">0</span>
        </div>
        <div class="cds-card indigo">
          <span class="cds-icon">๐ฅ</span>
          <span class="cds-label">ุนุฏุฏ ุงููุฏูููู</span>
          <span class="cds-val" id="cDebtCount">0</span>
        </div>
      </div>
      <div class="search-box small" style="margin:12px 0">
        <span class="search-icon">๐</span>
        <input id="debtSearch"
               placeholder="ุจุญุซ ูู ุงูุฒุจุงุฆู ุงููุฏูููู..."
               oninput="renderDebts()"
               autocomplete="off">
      </div>
      <ul id="debtList"></ul>
    </div>
  </section>

  <!-- โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
       ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ -->
  <section id="alerts" class="page">
    <div class="page-header">
      <button class="backBtn" onclick="goBack()">
        <span class="back-arrow">โฌ</span>
        <span data-i18n="back">ุงูุฑุฌูุน</span>
      </button>
      <h3 data-i18n="menu_users">
        <span class="page-header-icon">๐ค</span> ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
      </h3>
    </div>
    <div class="card-panel">
      <h4 class="card-panel-title">โ ุฅุถุงูุฉ ูุณุชุฎุฏู ุฌุฏูุฏ</h4>
      <form id="addUserInAlerts" class="form-grid">
        <div>
          <label class="set-label">ุงุณู ุงููุณุชุฎุฏู</label>
          <input type="text" id="alertUserName"
                 placeholder="ุงุณู ุงููุณุชุฎุฏู" required>
        </div>
        <div>
          <label class="set-label">PIN (4 ุฃุฑูุงู)</label>
          <input type="password" id="alertUserPin"
                 placeholder="****" maxlength="4" required
                 inputmode="numeric">
        </div>
        <div>
          <label class="set-label">ุงูุฏูุฑ</label>
          <select id="alertUserRole">
            <option value="baker"   data-i18n="role_seller">ุจุงุฆุน</option>
            <option value="manager" data-i18n="role_manager">ูุฏูุฑ</option>
          </select>
        </div>
        <div style="display:flex;align-items:flex-end">
          <button type="submit" style="width:100%">โ ุฅุถุงูุฉ</button>
        </div>
      </form>
    </div>
    <ul id="alertList" style="margin-top:12px"></ul>
  </section>

  <!-- โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
       ุฅุฏุงุฑุฉ ุงูุฃุนูุงู
  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ -->
  <section id="reports" class="page">
    <div class="page-header">
      <button class="backBtn" onclick="goBack()">
        <span class="back-arrow">โฌ</span>
        <span data-i18n="back">ุงูุฑุฌูุน</span>
      </button>
      <h3 data-i18n="menu_reports">
        <span class="page-header-icon">๐</span> ุฅุฏุงุฑุฉ ุงูุฃุนูุงู
      </h3>
    </div>

    <!-- ุชุจููุจุงุช ุงููุชุฑุฉ ุงูุฒูููุฉ -->
    <div class="report-tabs">
      <button class="rtab active" onclick="switchReportTab('daily',this)"   data-i18n="tab_day">ุงูููู</button>
      <button class="rtab"        onclick="switchReportTab('weekly',this)"  data-i18n="tab_week">ุงูุฃุณุจูุน</button>
      <button class="rtab"        onclick="switchReportTab('monthly',this)" data-i18n="tab_month">ุงูุดูุฑ</button>
      <button class="rtab"        onclick="switchReportTab('yearly',this)"  data-i18n="tab_year">ุงูุณูุฉ</button>
      <button class="rtab"        onclick="switchReportTab('all',this)"     data-i18n="tab_all">ุงููู</button>
      <button class="rtab rtab-date" onclick="switchReportTab('custom',this)" title="ุจุญุซ ุจุงูุชุงุฑูุฎ">๐</button>
    </div>

    <!-- ุจุญุซ ุจุงูุชุงุฑูุฎ ุงููุฎุตุต -->
    <div id="customDateRow" class="custom-date-row hidden">
      <div class="custom-date-inner">
        <label class="set-label">ูู ุชุงุฑูุฎ</label>
        <input type="date" id="reportDateFrom" onchange="renderReports()">
        <label class="set-label">ุฅูู ุชุงุฑูุฎ</label>
        <input type="date" id="reportDateTo" onchange="renderReports()">
      </div>
    </div>

    <!-- ุดุฑูุท ุฅุธูุงุฑ/ุฅุฎูุงุก ุงูุฃุฑูุงู -->
    <div class="reports-toggle-bar">
      <span id="reportsToggleLabel" class="reports-period-label">๐ ุฅุฌูุงูู ุงูููู</span>
      <button class="btn-toggle-numbers"
              onclick="toggleReportNumbers()"
              id="btnToggleNumbers"
              title="ุฅุธูุงุฑ/ุฅุฎูุงุก ุงูุฃุฑูุงู">
        ๐๏ธ ุฅุธูุงุฑ ุงูุฃุฑูุงู
      </button>
    </div>

    <!-- ุจุทุงูุงุช ุงูุฃุฑูุงู -->
    <div id="reportCardsWrap" class="report-cards-wrap hidden">
      <div class="report-cards">
        <div class="rcard green">
          <span class="rcard-icon">๐</span>
          <span class="rcard-label" data-i18n="r_sales">ุนูููุงุช ุงูุจูุน</span>
          <span class="rcard-val" id="rSales">0</span>
        </div>
        <div class="rcard blue">
          <span class="rcard-icon">๐ฐ</span>
          <span class="rcard-label" data-i18n="r_revenue">ุฅุฌูุงูู ุงููุฏุงุฎูู</span>
          <span class="rcard-val" id="rRevenue">0</span>
        </div>
        <div class="rcard orange">
          <span class="rcard-icon">๐ท๏ธ</span>
          <span class="rcard-label" data-i18n="r_cost">ุชูููุฉ ุงูุดุฑุงุก</span>
          <span class="rcard-val" id="rCost">0</span>
        </div>
        <div class="rcard purple">
          <span class="rcard-icon">๐</span>
          <span class="rcard-label" data-i18n="r_profit">ุตุงูู ุงูุฑุจุญ</span>
          <span class="rcard-val" id="rProfit">0</span>
        </div>
        <div class="rcard red">
          <span class="rcard-icon">โ๏ธ</span>
          <span class="rcard-label" data-i18n="total_debts">ุฅุฌูุงูู ุงูุฏููู</span>
          <span class="rcard-val" id="rTotalDebt">0</span>
        </div>
        <div class="rcard indigo">
          <span class="rcard-icon">๐ฅ</span>
          <span class="rcard-label" data-i18n="debtors_count">ุนุฏุฏ ุงููุฏูููู</span>
          <span class="rcard-val" id="rDebtCount">0</span>
        </div>
        <div class="rcard green">
          <span class="rcard-icon">๐ต</span>
          <span class="rcard-label">ููุฏ ูุนูู ูุญุตููู</span>
          <span class="rcard-val" id="rCashRevenue" style="color:#10b981">0</span>
        </div>
        <div class="rcard red">
          <span class="rcard-icon">๐</span>
          <span class="rcard-label">ูุจูุนุงุช ุจุงูุฏูู</span>
          <span class="rcard-val" id="rDebtRevenue" style="color:#ef4444">0</span>
        </div>
      </div>

      <!-- ูุฏุงุฎูู ุญุณุจ ุงููุณุชุฎุฏู -->
      <div class="user-revenue-section">
        <h4>๐ค ุงููุฏุงุฎูู ุญุณุจ ุงููุณุชุฎุฏู</h4>
        <ul id="userRevenueList"></ul>
      </div>
    </div>

    <!-- ุจุทุงูุงุช ุงูุฏููู ุงูุซุงุจุชุฉ -->
    <div class="report-debt-summary">
      <div class="rds-card">
        <span>โ๏ธ ุฅุฌูุงูู ุงูุฏููู</span>
        <strong id="rTotalDebt2">0</strong>
      </div>
      <div class="rds-card indigo">
        <span>๐ฅ ุนุฏุฏ ุงููุฏูููู</span>
        <strong id="rDebtCount2">0</strong>
      </div>
    </div>

    <!-- ุฒุฑ ุงูุฅููุงู ุงููููู -->
    <button class="btn-daily-close" onclick="showDailyClose()">
      โ ุฅููุงู ุงูููู
    </button>

    <!-- ุชูุฑูุฑ ุงูููุชุฌุงุช -->
    <div class="card-panel" style="margin-top:16px">
      <div class="card-panel-header">
        <h4 class="card-panel-title" style="margin:0">๐ ุชูุฑูุฑ ุงูููุชุฌุงุช</h4>
        <div style="display:flex;gap:8px">
          <button onclick="renderProductReport('top')"  id="btnTopProducts"  class="rptab active" style="font-size:13px;padding:6px 14px">๐ ุงูุฃูุซุฑ ูุจูุนุงู</button>
          <button onclick="renderProductReport('slow')" id="btnSlowProducts" class="rptab"        style="font-size:13px;padding:6px 14px">๐ข ุงูุฑุงูุฏุฉ</button>
          <button onclick="renderProductReport('low')"  id="btnLowProducts"  class="rptab"        style="font-size:13px;padding:6px 14px">โ๏ธ ุงููุฎุฒูู ุงูููุฎูุถ</button>
        </div>
      </div>
      <ul id="productReportList"></ul>
    </div>

    <!-- ุณุฌู ุงูุนูููุงุช -->
    <div style="margin-top:16px">
      <div class="card-panel-header" style="margin-bottom:10px">
        <h4 data-i18n="sales_log" style="margin:0">๐ ุณุฌู ุงูุนูููุงุช</h4>
        <div style="display:flex;gap:8px;flex-wrap:wrap">
          <button onclick="clearSalesData('month')"
                  class="btn-clear-sales btn-clear-month"
                  title="ูุณุญ ุจูุงูุงุช ูุฐุง ุงูุดูุฑ">๐๏ธ ูุณุญ ุงูุดูุฑ</button>
          <button onclick="clearSalesData('year')"
                  class="btn-clear-sales btn-clear-year"
                  title="ูุณุญ ุจูุงูุงุช ูุฐู ุงูุณูุฉ">๐๏ธ ูุณุญ ุงูุณูุฉ</button>
        </div>
      </div>
      <ul id="salesLog"></ul>
    </div>
  </section>

  <!-- โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
       ุงูุฅุนุฏุงุฏุงุช
  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ -->
  <section id="settings" class="page">
    <div class="page-header">
      <button class="backBtn" onclick="goBack()">
        <span class="back-arrow">โฌ</span>
        <span data-i18n="back">ุงูุฑุฌูุน</span>
      </button>
      <h3 data-i18n="menu_settings">
        <span class="page-header-icon">โ๏ธ</span> ุงูุฅุนุฏุงุฏุงุช
      </h3>
    </div>

    <div class="settings-tabs">
      <button class="stab active" onclick="switchSettingsTab('app',this)"    data-i18n="stab_app">๐ฅ๏ธ ุงูุจุฑูุงูุฌ</button>
      <button class="stab"        onclick="switchSettingsTab('store',this)"  data-i18n="stab_store">๐ช ุงููุชุฌุฑ</button>
      <button class="stab"        onclick="switchSettingsTab('print',this)"  data-i18n="stab_print">๐จ๏ธ ุงูุทุจุงุนุฉ</button>
      <button class="stab"        onclick="switchSettingsTab('system',this)" data-i18n="stab_system">๐ง ุงููุธุงู</button>
      <button class="stab"        onclick="switchSettingsTab('about',this)">โน๏ธ ุญูู</button>
    </div>

    <!-- ุงููุณู 1: ุงูุจุฑูุงูุฌ -->
    <div id="settingsApp" class="settings-panel active">
      <h4 data-i18n="stab_app">๐ฅ๏ธ ุฅุนุฏุงุฏุงุช ุงูุจุฑูุงูุฌ</h4>

      <label class="set-label" data-i18n="date_format">ุตูุบุฉ ุงูุชุงุฑูุฎ</label>
      <select id="sDateFormat">
        <option value="DD-MM-YYYY">ููู - ุดูุฑ - ุณูุฉ</option>
        <option value="MM-DD-YYYY">ุดูุฑ - ููู - ุณูุฉ</option>
        <option value="YYYY-MM-DD">ุณูุฉ - ุดูุฑ - ููู</option>
      </select>

      <label class="set-label" data-i18n="time_format">ุตูุบุฉ ุงูููุช</label>
      <select id="sTimeFormat">
        <option value="24">24 ุณุงุนุฉ</option>
        <option value="12">12 ุณุงุนุฉ (AM/PM)</option>
      </select>

      <label class="set-label" data-i18n="currency_label">ุฑูุฒ ุงูุนููุฉ</label>
      <select id="sCurrency">
        <option value="ุฏุฌ">๐ฉ๐ฟ ุฏุฌ โ ุงูุฌุฒุงุฆุฑ</option>
        <option value="ุฏ.ู.">๐ฒ๐ฆ ุฏ.ู. โ ุงููุบุฑุจ</option>
        <option value="ุฏ.ุช">๐น๐ณ ุฏ.ุช โ ุชููุณ</option>
        <option value="ู.ุฏ">๐ฑ๐พ ู.ุฏ โ ููุจูุง</option>
        <option value="ุฌ.ู">๐ช๐ฌ ุฌ.ู โ ูุตุฑ</option>
        <option value="ุฑ.ุณ">๐ธ๐ฆ ุฑ.ุณ โ ุงูุณุนูุฏูุฉ</option>
        <option value="ุฏ.ุฅ">๐ฆ๐ช ุฏ.ุฅ โ ุงูุฅูุงุฑุงุช</option>
        <option value="ุฑ.ู">๐ถ๐ฆ ุฑ.ู โ ูุทุฑ</option>
        <option value="ุฏ.ู">๐ฐ๐ผ ุฏ.ู โ ุงููููุช</option>
        <option value="ุฑ.ุน">๐ด๐ฒ ุฑ.ุน โ ุนููุงู</option>
        <option value="ุฏ.ุจ">๐ง๐ญ ุฏ.ุจ โ ุงูุจุญุฑูู</option>
        <option value="ู.ู">๐ฑ๐ง ู.ู โ ูุจูุงู</option>
        <option value="ู.ุณ">๐ธ๐พ ู.ุณ โ ุณูุฑูุง</option>
        <option value="ุฏ.ุน">๐ฎ๐ถ ุฏ.ุน โ ุงูุนุฑุงู</option>
        <option value="ุฑ.ู">๐พ๐ช ุฑ.ู โ ุงูููู</option>
        <option value="ุฌ.ุณ">๐ธ๐ฉ ุฌ.ุณ โ ุงูุณูุฏุงู</option>
        <option value="ุฃ.ู">๐ฒ๐ท ุฃ.ู โ ููุฑูุชุงููุง</option>
      </select>

      <label class="set-label" data-i18n="lang_label">ูุบุฉ ุงูุจุฑูุงูุฌ</label>
      <select id="sLang" onchange="previewLangChange(this.value)">
        <option value="ar">๐ฉ๐ฟ ุงูุนุฑุจูุฉ</option>
        <option value="fr">๐ซ๐ท Franรงais</option>
        <option value="en">๐ฌ๐ง English</option>
      </select>
      <p id="langNote" style="font-size:13px;color:#6366f1;margin:4px 0 8px;min-height:18px"></p>

      <!-- ุงูุฎุทูุท -->
      <div class="settings-section-divider">๐ค ุฅุนุฏุงุฏุงุช ุงูุฎุทูุท ูุงููุธูุฑ</div>

      <label class="set-label">ููุน ุงูุฎุท</label>
      <select id="sFontFamily" onchange="previewFont()">
        <optgroup label="โฆ ุฎุทูุท ุนุฑุจูุฉ">
          <option value="Cairo">Cairo โ ูุงูุฑู (ููุงุณููู)</option>
          <option value="Tajawal">Tajawal โ ุชุฌููู (ุญุฏูุซ)</option>
          <option value="Amiri">Amiri โ ุฃููุฑู (ุชุฑุงุซู)</option>
          <option value="Readex Pro">Readex Pro โ ุฑูุฏูุณ (ูุงุถุญ)</option>
          <option value="Noto Kufi Arabic">Noto Kufi โ ูููู (ุฑุณูู)</option>
        </optgroup>
        <optgroup label="โฆ ุฎุทูุท ูุงุชูููุฉ">
          <option value="Poppins">Poppins โ ุจูุจููุฒ (ุฃููู)</option>
          <option value="Raleway">Raleway โ ุฑุงูููู (ุฑุงูู)</option>
          <option value="Montserrat">Montserrat โ ูููุชุณูุฑุงุช</option>
          <option value="Inter">Inter โ ุฅูุชุฑ (ุชููู)</option>
          <option value="IBM Plex Mono">IBM Plex Mono (ุฃุญุงุฏู)</option>
        </optgroup>
      </select>
      <div id="fontPreviewBox" class="font-preview-box">
        ูุนุงููุฉ ุงูุฎุท: ูุฑุญุจุงู ุจูู ูู POS DZ โ Bonjour POS DZ
      </div>

      <label class="set-label">ุญุฌู ุงูุฎุท</label>
      <div class="font-size-picker">
        <button class="fsz-btn" onclick="setFontSize(13)" data-size="13">ุตุบูุฑ</button>
        <button class="fsz-btn active" onclick="setFontSize(15)" data-size="15">ูุชูุณุท</button>
        <button class="fsz-btn" onclick="setFontSize(17)" data-size="17">ูุจูุฑ</button>
        <button class="fsz-btn" onclick="setFontSize(19)" data-size="19">ูุจูุฑ ุฌุฏุงู</button>
      </div>

      <!-- ุงูุตูุช -->
      <div class="settings-section-divider">๐ ุฅุนุฏุงุฏุงุช ุงูุตูุช ูุงูุฑููู</div>
      <div class="sound-settings-card">
        <div class="sound-option">
          <div class="sound-option-info">
            <span class="sound-icon">๐</span>
            <div>
              <div class="sound-option-title">ุตูุช ุฅุถุงูุฉ ุงูููุชุฌ</div>
              <div class="sound-option-desc">ุฑููู ุนูุฏ ุฅุถุงูุฉ ููุชุฌ ููุนุฑุจุฉ</div>
            </div>
          </div>
          <label class="toggle-label">
            <input type="checkbox" id="sSoundAdd" class="toggle-input" onchange="saveSoundSettings()">
            <span class="toggle-slider"></span>
          </label>
        </div>
        <div class="sound-option">
          <div class="sound-option-info">
            <span class="sound-icon">โ</span>
            <div>
              <div class="sound-option-title">ุตูุช ุฅุชูุงู ุงูุจูุน</div>
              <div class="sound-option-desc">ุฑููู ุนูุฏ ุฅุชูุงู ุนูููุฉ ุงูุจูุน ุจูุฌุงุญ</div>
            </div>
          </div>
          <label class="toggle-label">
            <input type="checkbox" id="sSoundPay" class="toggle-input" onchange="saveSoundSettings()">
            <span class="toggle-slider"></span>
          </label>
        </div>
        <div style="margin-top:10px;display:flex;gap:8px;flex-wrap:wrap">
          <button onclick="testSound('add')" style="background:#3b82f6;padding:7px 14px;font-size:13px">๐ ุชุฌุฑุจุฉ ุตูุช ุงูุฅุถุงูุฉ</button>
          <button onclick="testSound('pay')" style="background:#10b981;padding:7px 14px;font-size:13px">๐ ุชุฌุฑุจุฉ ุตูุช ุงูุจูุน</button>
        </div>
      </div>

      <!-- ุงูุจุงุฑููุฏ -->
      <div class="settings-section-divider">๐ท ูุงุฑุฆ ุงูุจุงุฑููุฏ</div>
      <div class="sound-settings-card">
        <div class="sound-option">
          <div class="sound-option-info">
            <span class="sound-icon">๐ท</span>
            <div>
              <div class="sound-option-title">ุชูุนูู ูุงุฑุฆ ุงูุจุงุฑููุฏ</div>
              <div class="sound-option-desc">ุญุฌุฒ ุงูููุชุฌุงุช ุชููุงุฆูุงู ุจุฌูุงุฒ ุงูุจุงุฑููุฏ</div>
            </div>
          </div>
          <label class="toggle-label">
            <input type="checkbox" id="sBarcodeReader" class="toggle-input" onchange="saveSoundSettings()">
            <span class="toggle-slider"></span>
          </label>
        </div>
        <p style="font-size:12px;color:var(--text3);margin:6px 0 0">
          โน๏ธ ุงูููุชุฌุงุช ุงูุชู ุชุญูู ุจุงุฑููุฏุงู ุชูุญุฌุฒ ุชููุงุฆูุงู โ ุงูููุชุฌุงุช ุจุฏูู ุจุงุฑููุฏ ุชูุญุฌุฒ ูุฏููุงู.
        </p>
      </div>

      <!-- ุงูุฃููุงู -->
      <label class="set-label">ููู ูุงุฌูุฉ ุงูุชุทุจูู</label>
      <div class="theme-picker">
        <button class="theme-swatch active" data-theme="default" onclick="setTheme('default')" style="background:linear-gradient(135deg,#6366f1,#a855f7)" title="ุจููุณุฌู (ุงูุงูุชุฑุงุถู)"></button>
        <button class="theme-swatch" data-theme="ocean"   onclick="setTheme('ocean')"   style="background:linear-gradient(135deg,#0ea5e9,#06b6d4)" title="ุฃุฒุฑู"></button>
        <button class="theme-swatch" data-theme="emerald" onclick="setTheme('emerald')" style="background:linear-gradient(135deg,#10b981,#059669)" title="ุฃุฎุถุฑ"></button>
        <button class="theme-swatch" data-theme="sunset"  onclick="setTheme('sunset')"  style="background:linear-gradient(135deg,#f59e0b,#ef4444)" title="ุจุฑุชูุงูู-ุฃุญูุฑ"></button>
        <button class="theme-swatch" data-theme="dark"    onclick="setTheme('dark')"    style="background:linear-gradient(135deg,#0f172a,#334155);border:2px solid #6366f1" title="ุฏุงูู ๐"></button>
      </div>

      <!-- ุฅุนุฏุงุฏุงุช ุงููุฎุฒูู -->
      <div class="settings-section-divider">๐ฆ ุฅุนุฏุงุฏุงุช ุงููุฎุฒูู</div>
      <label class="set-label">ุญุฏ ุชูุจูู ุงููุฎุฒูู ุงูููุฎูุถ</label>
      <input id="sLowStockThreshold" type="number" min="1" max="100" placeholder="5" style="width:120px">
      <p style="font-size:12px;color:var(--text3);margin:4px 0 12px">
        ูููุจููู ุนูุฏ ูุตูู ูููุฉ ุฃู ููุชุฌ ููุฐุง ุงูุญุฏ ุฃู ุฃูู (ุงูุงูุชุฑุงุถู: 5)
      </p>

      <button onclick="saveSettingsApp()" style="margin-top:16px" data-i18n="save_app">๐พ ุญูุธ ุฅุนุฏุงุฏุงุช ุงูุจุฑูุงูุฌ</button>
      <div id="msgSettingsApp" class="toast-msg"></div>
    </div>

    <!-- ุงููุณู 2: ุงููุชุฌุฑ -->
    <div id="settingsStore" class="settings-panel">
      <h4 data-i18n="stab_store">๐ช ุจูุงูุงุช ุงููุชุฌุฑ</h4>
      <label class="set-label" data-i18n="logo_label">ุดุนุงุฑ ุงููุชุฌุฑ</label>
      <div class="logo-upload-box">
        <img id="logoPreview" src="" alt=""
             style="display:none;max-height:80px;border-radius:8px;margin-bottom:8px">
        <input type="file" id="logoInput" accept="image/*"
               onchange="previewLogo(this)" style="display:none">
        <button onclick="document.getElementById('logoInput').click()"
                style="background:#6366f1"
                data-i18n="upload_logo">๐ท ุชุญููู ุงูุดุนุงุฑ</button>
        <button onclick="removeLogo()"
                style="background:#ef4444;margin-right:8px"
                data-i18n="remove_logo">๐๏ธ ุญุฐู</button>
      </div>
      <label class="set-label" data-i18n="shop_name">ุงุณู ุงููุชุฌุฑ</label>
      <input id="sname" placeholder="ุงุณู ุงููุญู">
      <label class="set-label" data-i18n="phone_label">ุฑูู ุงููุงุชู</label>
      <input id="sphone" placeholder="0XXX XXX XXX" type="tel">
      <label class="set-label" data-i18n="address_label">ุงูุนููุงู</label>
      <input id="saddr" placeholder="ุงูุนููุงู">
      <label class="set-label" data-i18n="welcome_label">ุฑุณุงูุฉ ุชุฑุญูุจ ูููุงุชูุฑุฉ</label>
      <textarea id="sWelcome" rows="3"
                style="width:100%;padding:10px;border-radius:var(--radius-sm);border:1.5px solid var(--border);resize:vertical;font-family:var(--font)"
                placeholder="ุดูุฑุงู ูุฒูุงุฑุชูู!"></textarea>
      <button onclick="saveSettingsStore()" style="margin-top:12px" data-i18n="save_store">๐พ ุญูุธ ุจูุงูุงุช ุงููุชุฌุฑ</button>
      <div id="msgSettingsStore" class="toast-msg"></div>
    </div>

    <!-- ุงููุณู 3: ุงูุทุจุงุนุฉ -->
    <div id="settingsPrint" class="settings-panel">
      <div class="print-settings-layout">
        <div class="print-settings-controls">
          <h4 data-i18n="stab_print">๐จ๏ธ ุฅุนุฏุงุฏุงุช ุงูุทุจุงุนุฉ</h4>
          <label class="set-label" data-i18n="invoice_num">ุฑูู ุงููุงุชูุฑุฉ ุงูุญุงูู</label>
          <input id="sInvoiceNum" type="number" placeholder="1" min="1">
          <label class="set-label" data-i18n="printer_label">ุงุฎุชูุงุฑ ุงูุทุงุจุนุฉ</label>
          <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap;margin-bottom:4px">
            <select id="sPrinter" style="flex:1;margin:0">
              <option value="default">ุงูุทุงุจุนุฉ ุงูุงูุชุฑุงุถูุฉ</option>
              <option value="thermal">ุทุงุจุนุฉ ุญุฑุงุฑูุฉ (Thermal)</option>
              <option value="inkjet">ุทุงุจุนุฉ ุนุงุฏูุฉ (Inkjet/Laser)</option>
            </select>
            <button onclick="searchForPrinters()"
                    style="background:#6366f1;padding:9px 14px;font-size:13px;white-space:nowrap">
              ๐ ุจุญุซ ุนู ุทุงุจุนุฉ
            </button>
          </div>
          <div id="printerSearchStatus" style="font-size:12px;color:var(--text3);margin-bottom:8px"></div>
          <label class="set-label" data-i18n="paper_size">ููุงุณ ุงููุฑู</label>
          <select id="sPaperSize">
            <option value="58mm">58 ูู</option>
            <option value="80mm">80 ูู</option>
            <option value="A4">A4</option>
            <option value="A5">A5</option>
          </select>
          <label class="set-label" data-i18n="copies_label">ุนุฏุฏ ุงููุณุฎ</label>
          <input id="sCopies" type="number" min="1" max="10" placeholder="1">
          <div class="check-group">
            <label class="check-label">
              <input type="checkbox" id="sPrintLogo">
              <span data-i18n="print_logo">ุทุจุงุนุฉ ุดุนุงุฑ ุงููุชุฌุฑ</span>
            </label>
            <label class="check-label">
              <input type="checkbox" id="sPrintShopName" checked>
              <span data-i18n="print_name">ุทุจุงุนุฉ ุงุณู ุงููุชุฌุฑ</span>
            </label>
            <label class="check-label">
              <input type="checkbox" id="sPrintPhone" checked>
              <span data-i18n="print_phone">ุทุจุงุนุฉ ุฑูู ุงููุงุชู</span>
            </label>
            <label class="check-label">
              <input type="checkbox" id="sPrintWelcome" checked>
              <span data-i18n="print_welcome">ุทุจุงุนุฉ ุฑุณุงูุฉ ุงูุชุฑุญูุจ</span>
            </label>
            <label class="check-label">
              <input type="checkbox" id="sPrintBarcode">
              <span data-i18n="print_barcode">ุทุจุงุนุฉ ุจุงุฑููุฏ ุงูููุชุฌุงุช</span>
            </label>
            <label class="check-label">
              <input type="checkbox" id="sPrintCustBarcode">
              <span data-i18n="print_cust_barcode">ุทุจุงุนุฉ ุจุงุฑููุฏ ุงููุงุชูุฑุฉ</span>
            </label>
          </div>
          <button onclick="saveSettingsPrint()" style="margin-top:12px" data-i18n="save_print">๐พ ุญูุธ ุฅุนุฏุงุฏุงุช ุงูุทุจุงุนุฉ</button>
          <div id="msgSettingsPrint" class="toast-msg"></div>
        </div>
        <div class="print-preview-panel">
          <div class="print-preview-label">๐๏ธ ูุนุงููุฉ ุงููุงุชูุฑุฉ</div>
          <div id="invoicePreview"></div>
        </div>
      </div>
    </div>

    <!-- ุงููุณู 4: ุงููุธุงู -->
    <div id="settingsSystem" class="settings-panel">
      <h4 data-i18n="stab_system">๐ง ุฅุนุฏุงุฏุงุช ุงููุธุงู</h4>
      <div class="system-card">
        <h5 data-i18n="auto_backup_title">๐พ ุณุฌู ุงูุนูููุงุช ูุงููุณุฎ ุงูุชููุงุฆู</h5>
        <p style="font-size:13px;color:#6b7280;margin:0 0 12px" data-i18n="auto_backup_desc">
          ุชูุนูู ุงููุณุฎ ุงููููู ุงูุชููุงุฆู ูุจูุงูุงุช ุงูุชุทุจูู.
        </p>
        <label class="toggle-label">
          <input type="checkbox" id="sAutoBackup" class="toggle-input" onchange="toggleAutoBackup(this.checked)">
          <span class="toggle-slider"></span>
          <span data-i18n="auto_backup_toggle" style="margin-right:10px">ุชูุนูู ุงููุณุฎ ุงููููู ุงูุชููุงุฆู</span>
        </label>
        <div id="backupStatus" style="margin-top:10px;font-size:13px;color:#6b7280"></div>
        <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:12px">
          <button onclick="manualBackup()" style="background:#6366f1" data-i18n="manual_backup">๐ฅ ูุณุฎ ุงุญุชูุงุทู ุงูุขู</button>
          <button onclick="document.getElementById('backupImportInput').click()" style="background:#10b981">๐ค ุงุณุชูุฑุงุฏ ูุณุฎุฉ</button>
          <input type="file" id="backupImportInput" accept=".json" style="display:none" onchange="importBackup(this)">
        </div>
        <div id="msgBackup" class="toast-msg"></div>
      </div>
      <hr style="margin:28px 0 20px;border:none;border-top:2px solid #fee2e2">
      <div class="system-card">
        <h5>๐๏ธ ุฅุฏุงุฑุฉ ุงูุจูุงูุงุช</h5>
        <p style="font-size:13px;color:#6b7280;margin:0 0 16px">ุฎูุงุฑุงุช ูุณุญ ุงูุจูุงูุงุช ุจุดูู ุงูุชูุงุฆู ุฃู ููู.</p>
        <div style="display:flex;flex-direction:column;gap:12px">
          <div style="background:rgba(245,158,11,0.08);border:1px solid rgba(245,158,11,0.3);border-radius:var(--radius-sm);padding:14px">
            <div style="font-weight:800;font-size:14px;color:#d97706;margin-bottom:6px">๐งน ุงููุณุญ ุงูุฌุฒุฆู</div>
            <div style="font-size:13px;color:#6b7280;margin-bottom:10px">
              ููุณุญ: ุงููุจูุนุงุชุ ุงูุฏูููุ ุณุฌู ุงูุนูููุงุช. <strong>ูุง ููุณุญ:</strong> ุฃุณูุงุก ุงูููุชุฌุงุช ูุงููุงุฑูุงุช ูุงูุนุงุฆูุงุช.
            </div>
            <button onclick="confirmPartialReset()"
                    style="background:linear-gradient(135deg,#f59e0b,#d97706);padding:10px 20px;font-size:13px;width:100%">
              ๐งน ูุณุญ ุฌุฒุฆู ููุจูุงูุงุช
            </button>
          </div>
          <div style="background:rgba(239,68,68,0.06);border:1px solid rgba(239,68,68,0.25);border-radius:var(--radius-sm);padding:14px">
            <div style="font-weight:800;font-size:14px;color:#dc2626;margin-bottom:6px">๐ด ุงููุณุญ ุงูููู</div>
            <div style="font-size:13px;color:#6b7280;margin-bottom:10px">
              ููุณุญ ูู ุดูุก: ุงููุตุงุฑููุ ุงูููุชุฌุงุชุ ุงูุฒุจุงุฆูุ ุงูุฏูููุ ููู ุงูุจูุงูุงุช.
            </div>
            <button onclick="confirmReset()" class="reset-btn" style="margin:0" data-i18n="reset_btn">
              ๐ด ุฅุนุงุฏุฉ ุถุจุท ุงููุธุงู ุงูููู
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- ุงููุณู 5: ุญูู ุงูุจุฑูุงูุฌ -->
    <div id="settingsAbout" class="settings-panel">
      <div class="about-card">
        <div class="about-logo-ring">
          <svg viewBox="0 0 60 60" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="30" cy="30" r="28" stroke="url(#alg1)" stroke-width="2.5"/>
            <path d="M18 30h8l4-10 6 20 4-10h8" stroke="url(#alg2)" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
            <defs>
              <linearGradient id="alg1" x1="2" y1="2" x2="58" y2="58"><stop stop-color="#6366f1"/><stop offset="1" stop-color="#a855f7"/></linearGradient>
              <linearGradient id="alg2" x1="18" y1="20" x2="42" y2="50"><stop stop-color="#38bdf8"/><stop offset="1" stop-color="#6366f1"/></linearGradient>
            </defs>
          </svg>
        </div>
        <div class="about-title">POS DZ</div>
        <div class="about-sub">ูุธุงู ููุงุท ุงูุจูุน ุงูุฐูู โ ููุงุฒู ุงูุญูููุงุช ูุงูุชุบููู</div>
        <div class="about-version-row">
          <span class="about-badge">ุงูุฅุตุฏุงุฑ: 2.0.0</span>
          <span class="about-badge">ุชุงุฑูุฎ: 2026/02/22</span>
        </div>
        <div class="about-license">
          <div class="about-license-title">ุญุงูุฉ ุงูุชุฑุฎูุต ๐</div>
          <div class="about-license-status">
            <span class="about-check">โ๏ธ</span>
            <span>ุงูุจุฑูุงูุฌ ููุนู</span>
          </div>
        </div>
        <div class="about-dev">
          <div class="about-dev-title">๐ค๐ป ุงููุทูุฑ</div>
          <div class="about-dev-info">
            <div>๐ข <strong>ุดุฑูุฉ:</strong> ุจูุณ ุฏูุฒุงุฏ | ุจ.ุญูุฒุฉ</div>
            <div>๐ฑ <strong>ูุงุชุณุงุจ:</strong>
              <a href="https://wa.me/213770044850" target="_blank" class="about-wa-link">๐ฉ๐ฟ 0770044850</a>
            </div>
          </div>
        </div>
        <div class="about-footer">ยฎ 2026 ุจูุณ ุฏูุฒุงุฏ - ุฌููุน ุงูุญููู ูุญููุธุฉ</div>
      </div>
    </div>

  </section>

  <!-- โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
       ููุฏุงู ุงููุณุชุฎุฏููู
  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ -->
  <div id="usersModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeUsersModal()">&times;</span>
      <h2 data-i18n="menu_users">ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู</h2>
      <form id="addUserForm">
        <input type="text"     id="newUserName" placeholder="ุงุณู ุงููุณุชุฎุฏู" required>
        <input type="password" id="newUserPin"  placeholder="PIN (4)" maxlength="4" required inputmode="numeric">
        <select id="newUserRole">
          <option value="baker"   data-i18n="role_seller">ุจุงุฆุน</option>
          <option value="manager" data-i18n="role_manager">ูุฏูุฑ</option>
        </select>
        <button type="submit" data-i18n="add_user">โ ุฅุถุงูุฉ ูุณุชุฎุฏู</button>
      </form>
      <table id="usersTable">
        <thead>
          <tr>
            <th data-i18n="col_name">ุงูุงุณู</th>
            <th>PIN</th>
            <th data-i18n="col_role">ุงูุฏูุฑ</th>
            <th data-i18n="col_options">ุฎูุงุฑุงุช</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

  <!-- Toast ุงูุฅุดุนุงุฑุงุช -->
  <div id="globalToast" class="global-toast"></div>

  <!-- ููุฏุงู ุงููุงููุฑุง/ุงูุจุงุฑููุฏ -->
  <div id="scannerModal"
       style="display:none;position:fixed;top:0;left:0;right:0;bottom:0;
              background:rgba(0,0,0,0.95);z-index:10000;padding:20px">
    <div style="max-width:500px;margin:auto;height:100%;display:flex;
                flex-direction:column;justify-content:center;align-items:center;gap:20px">
      <div style="color:white;font-size:18px;text-align:center;font-weight:700">
        ๐ท ุฌุงุฑู ุงููุณุญ...
      </div>
      <video id="scannerVideo"
             style="width:100%;max-width:400px;border:2px solid var(--success);border-radius:12px">
      </video>
      <canvas id="scannerCanvas" style="display:none"></canvas>
      <div style="color:white;font-size:14px;text-align:center">
        <div style="color:#94a3b8">ูุฌูู ุงููุงููุฑุง ูุญู ุงูุจุงุฑููุฏ ุฃู QR Code</div>
        <button onclick="closeScannerModal()"
                style="margin-top:20px;padding:12px 28px;background:#ef4444;color:white;
                       border:none;border-radius:10px;cursor:pointer;font-weight:700;
                       font-size:15px">
          โ ุฅูุบุงุก
        </button>
      </div>
    </div>
  </div>

</div><!-- /mainApp -->

<script src="https://cdn.jsdelivr.net/npm/@zxing/library@0.20.0/umd/index.min.js"></script>
<script src="app.js"></script>
</body>
</html>
